# Task 1.3: Plugin Manifest

Navigation: [Design](../design.md) | [PRD](../../../stories/1/prd.md)

## Objective

Create `.claude/plugins/safety-guard/manifest.json` - the plugin manifest that defines metadata and hook registrations for the safety guard plugin.

## Output File

`.claude/plugins/safety-guard/manifest.json`

## Specification

The manifest follows Claude Code's plugin schema:

```json
{
  "name": "safety-guard",
  "version": "1.0.0",
  "description": "Blocks dangerous commands and protects sensitive files, even with --dangerously-skip-permissions",
  "author": "agent-discipline",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "command": "./hooks/dangerous-command-guard.sh"
      },
      {
        "matcher": "Edit|Write|MultiEdit",
        "command": "./hooks/protected-files-guard.py"
      }
    ]
  }
}
```

## Field Definitions

| Field | Type | Description |
|-------|------|-------------|
| `name` | string | Plugin identifier, used in install commands |
| `version` | string | Semantic version |
| `description` | string | Human-readable description |
| `author` | string | Plugin author/maintainer |
| `hooks` | object | Hook definitions keyed by event name |
| `hooks.PreToolUse` | array | Array of hook configurations |
| `hooks.PreToolUse[].matcher` | string | Regex pattern matching tool names |
| `hooks.PreToolUse[].command` | string | Relative path to hook script |

## Matcher Patterns

| Matcher | Tools Matched |
|---------|---------------|
| `"Bash"` | Bash tool only |
| `"Edit\|Write\|MultiEdit"` | Edit, Write, or MultiEdit tools |

## Directory Structure

After this task:
```
.claude/
├── hooks/
│   ├── dangerous-command-guard.sh   # Task 1.1
│   └── protected-files-guard.py     # Task 1.2
└── plugins/
    └── safety-guard/
        └── manifest.json            # This task
```

## Testing

Validate JSON syntax:
```bash
cat .claude/plugins/safety-guard/manifest.json | jq .
```

## Acceptance Criteria

- [ ] File is valid JSON
- [ ] Name is `safety-guard`
- [ ] Version follows semver (1.0.0)
- [ ] Both PreToolUse hooks are defined
- [ ] Bash matcher points to dangerous-command-guard.sh
- [ ] Edit|Write|MultiEdit matcher points to protected-files-guard.py
- [ ] Paths are relative to plugin directory
